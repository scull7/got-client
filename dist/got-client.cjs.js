'use strict';

/*  */















function authToString(a) {
  return a.user + ':' + a.password
}


function propOr(p, d, u) {
  return u[p] == null ? d : u[p]
}

/*  */




const DEFAULT_OPTION_BASE_URL   = '/';
const DEFAULT_OPTION_JSON      = true;
const DEFAULT_OPTION_RETRY      = 0;
const DEFAULT_OPTION_REDIRECT  = true;
const DEFAULT_OPTION_ENCODING   = 'utf8';
const DEFAULT_OPTION_HEADERS   = {};
const DEFAULT_OPTION_TIMEOUT   = {
  connection : 120000 // 2 minutes
, socket     : 30000 // 30 seconds
};


function getAuth(u) {
  return u.auth == null ? '' : authToString(u.auth)
}


function timeoutPropOr(p, d, u) {
  return u.timeout == null ? d : (u.timeout[p] == null ? d : u.timeout[p])
}


function getTimeout(u) {
  const CONNECTION = DEFAULT_OPTION_TIMEOUT.connection;
  const SOCKET = DEFAULT_OPTION_TIMEOUT.socket;
  
  return {
    connection: timeoutPropOr('connection', CONNECTION, u)
  , socket: timeoutPropOr('socket', SOCKET, u)
  }
}





function Factory(u)  {

  return {
    base_url       : propOr('base_url', DEFAULT_OPTION_BASE_URL, u)
  , auth           : getAuth(u)
  , json           : propOr('is_json', DEFAULT_OPTION_JSON, u)
  , timeout        : getTimeout(u)
  , retry          : propOr('retry', DEFAULT_OPTION_RETRY, u)
  , encoding       : propOr('encoding', DEFAULT_OPTION_ENCODING, u)
  , headers        : propOr('headers', DEFAULT_OPTION_HEADERS, u)
  , query          : propOr('query', DEFAULT_OPTION_HEADERS, u)
  , followRedirect : propOr('followRedirect', DEFAULT_OPTION_REDIRECT, u)
  }

}

/*  */


const client_config  = Factory({});
console.log(client_config);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ290LWNsaWVudC5janMuanMiLCJzb3VyY2VzIjpbIi4uL3NyYy9jb25maWcvdXNlci5qcyIsIi4uL3NyYy9jb25maWcvY2xpZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5pbXBvcnQgdHlwZSB7IEhlYWRlcnMgfSBmcm9tICcuLi9odHRwJ1xuaW1wb3J0IHR5cGUgeyBRdWVyeSB9IGZyb20gJy4uL3VybCdcblxudHlwZSBBdXRoID1cbiAgeyB1c2VyICAgICA6IHN0cmluZ1xuICAsIHBhc3N3b3JkIDogc3RyaW5nXG4gIH1cblxudHlwZSBUaW1lb3V0ID1cbiAgeyBjb25uZWN0aW9uIDogP251bWJlclxuICAsIHNvY2tldCAgICAgOiA/bnVtYmVyXG4gIH1cblxuXG50eXBlIFJldHJ5Rm4gICAgICAgICAgID0gKHJldHJ5OiBudW1iZXIsIGVycm9yOiBhbnkpID0+IG51bWJlclxudHlwZSBSZXRyeSAgICAgICAgICAgICA9IG51bWJlciB8IFJldHJ5Rm5cblxuXG5leHBvcnQgdHlwZSBDb25maWcgPVxuICB7IGJhc2VfdXJsPyAgICAgICA6IHN0cmluZ1xuICAsIGF1dGg/ICAgICAgICAgICA6IEF1dGhcbiAgLCBpc19qc29uPyAgICAgICAgOiBib29sZWFuXG4gICwgdGltZW91dD8gICAgICAgIDogVGltZW91dFxuICAsIHJldHJ5PyAgICAgICAgICA6IFJldHJ5XG4gICwgZW5jb2Rpbmc/ICAgICAgIDogc3RyaW5nXG4gICwgaGVhZGVycz8gICAgICAgIDogSGVhZGVyc1xuICAsIHF1ZXJ5PyAgICAgICAgICA6IFF1ZXJ5XG4gICwgZm9sbG93UmVkaXJlY3Q/IDogYm9vbGVhblxuICB9XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGF1dGhUb1N0cmluZyhhOiBBdXRoKTogc3RyaW5nIHtcbiAgcmV0dXJuIGEudXNlciArICc6JyArIGEucGFzc3dvcmRcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gcHJvcE9yPFQ+KHA6IHN0cmluZywgZDogVCwgdTogQ29uZmlnKTogVCB7XG4gIHJldHVybiB1W3BdID09IG51bGwgPyBkIDogdVtwXVxufVxuIiwiLyogQGZsb3cgKi9cblxuaW1wb3J0IHR5cGUgeyBIZWFkZXJzIH0gZnJvbSAnLi4vaHR0cCdcbmltcG9ydCB0eXBlIHsgUXVlcnkgfSBmcm9tICcuLi91cmwnXG5pbXBvcnQgdHlwZSB7IENvbmZpZyBhcyBVc2VyQ29uZmlnIH0gZnJvbSAnLi91c2VyJ1xuaW1wb3J0ICogYXMgVXNlciBmcm9tICcuL3VzZXInXG5cbnR5cGUgUGF0aCAgICA9IHN0cmluZ1xudHlwZSBSZXRyeUZuID0gKHJldHJ5OiBudW1iZXIsIGFueSkgPT4gbnVtYmVyXG50eXBlIFJldHJ5ICAgPSBudW1iZXIgfCBSZXRyeUZuXG50eXBlIFRpbWVvdXQgPSB7XG4gIGNvbm5lY3Rpb24gOiBudW1iZXJcbiwgc29ja2V0ICAgICA6IG51bWJlclxufVxuXG5cbmNvbnN0IERFRkFVTFRfT1BUSU9OX0JBU0VfVVJMIDogc3RyaW5nICA9ICcvJ1xuY29uc3QgREVGQVVMVF9PUFRJT05fSlNPTiAgICAgOiBib29sZWFuID0gdHJ1ZVxuY29uc3QgREVGQVVMVF9PUFRJT05fUkVUUlkgICAgOiBudW1iZXIgID0gMFxuY29uc3QgREVGQVVMVF9PUFRJT05fUkVESVJFQ1QgOiBib29sZWFuID0gdHJ1ZVxuY29uc3QgREVGQVVMVF9PUFRJT05fRU5DT0RJTkcgOiBzdHJpbmcgID0gJ3V0ZjgnXG5jb25zdCBERUZBVUxUX09QVElPTl9IRUFERVJTICA6IEhlYWRlcnMgPSB7fVxuY29uc3QgREVGQVVMVF9PUFRJT05fUVVFUlkgICAgOiBRdWVyeSAgID0ge31cbmNvbnN0IERFRkFVTFRfT1BUSU9OX1RJTUVPVVQgIDogVGltZW91dCA9IHtcbiAgY29ubmVjdGlvbiA6IDEyMDAwMCAvLyAyIG1pbnV0ZXNcbiwgc29ja2V0ICAgICA6IDMwMDAwIC8vIDMwIHNlY29uZHNcbn1cblxuXG5mdW5jdGlvbiBnZXRBdXRoKHU6IFVzZXJDb25maWcpOiBzdHJpbmcge1xuICByZXR1cm4gdS5hdXRoID09IG51bGwgPyAnJyA6IFVzZXIuYXV0aFRvU3RyaW5nKHUuYXV0aClcbn1cblxuXG5mdW5jdGlvbiB0aW1lb3V0UHJvcE9yKHA6IHN0cmluZywgZDogbnVtYmVyLCB1OiBVc2VyQ29uZmlnKTogbnVtYmVyIHtcbiAgcmV0dXJuIHUudGltZW91dCA9PSBudWxsID8gZCA6ICh1LnRpbWVvdXRbcF0gPT0gbnVsbCA/IGQgOiB1LnRpbWVvdXRbcF0pXG59XG5cblxuZnVuY3Rpb24gZ2V0VGltZW91dCh1OiBVc2VyQ29uZmlnKTogVGltZW91dCB7XG4gIGNvbnN0IENPTk5FQ1RJT04gPSBERUZBVUxUX09QVElPTl9USU1FT1VULmNvbm5lY3Rpb25cbiAgY29uc3QgU09DS0VUID0gREVGQVVMVF9PUFRJT05fVElNRU9VVC5zb2NrZXRcbiAgXG4gIHJldHVybiB7XG4gICAgY29ubmVjdGlvbjogdGltZW91dFByb3BPcignY29ubmVjdGlvbicsIENPTk5FQ1RJT04sIHUpXG4gICwgc29ja2V0OiB0aW1lb3V0UHJvcE9yKCdzb2NrZXQnLCBTT0NLRVQsIHUpXG4gIH1cbn1cblxuXG5leHBvcnQgdHlwZSBDb25maWcgPSB7XG4gIGJhc2VfdXJsICAgICAgIDogc3RyaW5nXG4sIGF1dGggICAgICAgICAgIDogc3RyaW5nXG4sIGpzb24gICAgICAgICAgIDogYm9vbGVhblxuLCB0aW1lb3V0ICAgICAgICA6IFRpbWVvdXRcbiwgcmV0cnkgICAgICAgICAgOiBSZXRyeVxuLCBlbmNvZGluZyAgICAgICA6IHN0cmluZ1xuLCBoZWFkZXJzICAgICAgICA6IEhlYWRlcnNcbiwgZm9sbG93UmVkaXJlY3QgOiBib29sZWFuXG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIEZhY3RvcnkodTogVXNlckNvbmZpZykgOiBDb25maWcge1xuXG4gIHJldHVybiB7XG4gICAgYmFzZV91cmwgICAgICAgOiBVc2VyLnByb3BPcignYmFzZV91cmwnLCBERUZBVUxUX09QVElPTl9CQVNFX1VSTCwgdSlcbiAgLCBhdXRoICAgICAgICAgICA6IGdldEF1dGgodSlcbiAgLCBqc29uICAgICAgICAgICA6IFVzZXIucHJvcE9yKCdpc19qc29uJywgREVGQVVMVF9PUFRJT05fSlNPTiwgdSlcbiAgLCB0aW1lb3V0ICAgICAgICA6IGdldFRpbWVvdXQodSlcbiAgLCByZXRyeSAgICAgICAgICA6IFVzZXIucHJvcE9yKCdyZXRyeScsIERFRkFVTFRfT1BUSU9OX1JFVFJZLCB1KVxuICAsIGVuY29kaW5nICAgICAgIDogVXNlci5wcm9wT3IoJ2VuY29kaW5nJywgREVGQVVMVF9PUFRJT05fRU5DT0RJTkcsIHUpXG4gICwgaGVhZGVycyAgICAgICAgOiBVc2VyLnByb3BPcignaGVhZGVycycsIERFRkFVTFRfT1BUSU9OX0hFQURFUlMsIHUpXG4gICwgcXVlcnkgICAgICAgICAgOiBVc2VyLnByb3BPcigncXVlcnknLCBERUZBVUxUX09QVElPTl9IRUFERVJTLCB1KVxuICAsIGZvbGxvd1JlZGlyZWN0IDogVXNlci5wcm9wT3IoJ2ZvbGxvd1JlZGlyZWN0JywgREVGQVVMVF9PUFRJT05fUkVESVJFQ1QsIHUpXG4gIH1cblxufVxuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozt1QkFnQzhCOzs7OztlQUtSLEVBQUssR0FBVyxHQUFNOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7a0JDUjFCOzs7Ozt3QkFLTSxHQUFXLEdBQVc7Ozs7O3FCQUt6Qjs7Ozs7Ozs7Ozs7Ozs7a0JBdUJJOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsifQ==
